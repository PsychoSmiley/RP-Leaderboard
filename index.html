<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>R/RP Leaderboard - LLM Roleplay Benchmark</title>
<meta name="description" content="LLM Roleplay Performance Benchmark">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg-primary:#000;--bg-secondary:#1c1c1e;--bg-tertiary:#2c2c2e;--bg-hover:#3a3a3c;--text-primary:#fff;--text-secondary:#98989d;--text-tertiary:#666;--accent:#0a84ff;--accent-hover:#409cff;--border:#38383a;--gold:#ffd700;--silver:#c0c0c0;--bronze:#cd7f32}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg-primary);color:var(--text-primary);line-height:1.6;min-height:100vh}
.container{max-width:1200px;margin:0 auto;padding:2rem}
header{text-align:center;padding:3rem 0 2rem}
h1{font-size:3rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.02em}
header p{color:var(--text-secondary);font-size:1.1rem}
.stats{display:flex;gap:3rem;justify-content:center;align-items:center;padding:1.5rem;background:var(--bg-secondary);border-radius:12px;margin-bottom:2rem;border:1px solid var(--border)}
.stats span{color:var(--text-secondary)}
.stats strong{color:var(--text-primary);font-weight:600}
.stats a{color:var(--accent);text-decoration:none;font-weight:500;transition:color .2s}
.stats a:hover{color:var(--accent-hover)}
.table-container{overflow-x:auto;border-radius:12px;background:var(--bg-secondary);border:1px solid var(--border)}
table{width:100%;border-collapse:collapse}
thead{background:var(--bg-tertiary);position:sticky;top:0;z-index:10}
th,td{padding:1rem;border-top:1px solid var(--border)}
th{text-align:left;font-weight:600;color:var(--text-secondary);font-size:.85rem;text-transform:uppercase;letter-spacing:.05em;cursor:pointer;user-select:none;transition:background .2s;border-bottom:1px solid var(--border)}
th:hover{background:var(--bg-hover)}
th:first-child,td:first-child{text-align:center}
th:first-child{width:60px}
th:nth-child(2){min-width:200px}
td{color:var(--text-primary)}
td:first-child{font-weight:600}
td:nth-child(2){font-weight:500}
td:nth-child(5) strong{color:var(--accent);font-size:1.05em}
tbody tr{transition:background .2s}
tbody tr:hover{background:var(--bg-tertiary)}
.rank-1 td:first-child{color:var(--gold);font-size:1.1em}
.rank-2 td:first-child{color:var(--silver);font-size:1.05em}
.rank-3 td:first-child{color:var(--bronze);font-size:1.05em}
.loading{text-align:center!important;color:var(--text-secondary);font-style:italic;padding:2rem!important}
footer{text-align:center;padding:3rem 0 2rem;color:var(--text-tertiary);font-size:.9rem}
footer .small{font-size:.8rem;color:var(--text-secondary)}
footer a{color:var(--accent);text-decoration:none;transition:color .2s}
footer a:hover{color:var(--accent-hover)}
@media (max-width:768px){
h1{font-size:2rem}
.container{padding:1rem}
.stats{flex-direction:column;gap:1rem;text-align:center}
table{font-size:.85rem}
th,td{padding:.75rem .5rem}
th:nth-child(2),td:nth-child(2){min-width:150px}
}
@media (max-width:480px){
h1{font-size:1.75rem}
table{font-size:.75rem}
th,td{padding:.6rem .4rem}
th:nth-child(7),td:nth-child(7){display:none}
}
html{scroll-behavior:smooth}
::selection{background:var(--accent);color:var(--bg-primary)}
</style>
</head>
<body>
<div class="container">
<header>
<h1>ðŸŽ­ R/RP Leaderboard</h1>
<p>LLM Roleplay Performance Benchmark</p>
</header>
<div class="stats">
<span>Models Tested: <strong id="count">0</strong></span>
<span>Last Updated: <strong id="updated">-</strong></span>
<a href="#" id="github-link" target="_blank" rel="noopener">GitHub â†—</a>
</div>
<div class="table-container">
<table id="leaderboard">
<thead>
<tr>
<th onclick="sort(0)" title="Click to sort">#</th>
<th onclick="sort(1)" title="Click to sort">Model</th>
<th onclick="sort(2)" title="Click to sort">Yes/No</th>
<th onclick="sort(3)" title="Click to sort">Open-Ended</th>
<th onclick="sort(4)" title="Click to sort">Total</th>
<th onclick="sort(5)" title="Click to sort">%</th>
<th onclick="sort(6)" title="Click to sort">Date</th>
</tr>
</thead>
<tbody id="tbody">
<tr><td colspan="7" class="loading">Loading leaderboard data...</td></tr>
</tbody>
</table>
</div>
<footer>
<p class="small">Scores represent AI judge's evaluation, not universal truth. Higher scores = better odds of finding a model you like, not perfection.</p>
</footer>
</div>
<script>
let data=[],sortCol=0,sortAsc=!1;

async function loadLeaderboard(){
  try{
    const e=await fetch("results.json");
    if(!e.ok)throw new Error(`HTTP ${e.status}`);
    const t=await e.json();
    data=t.leaderboard||[],
    document.getElementById("count").textContent=t.metadata?.total_models||data.length;
    const o=t.metadata?.last_updated;
    o?document.getElementById("updated").textContent=new Date(o).toLocaleDateString():document.getElementById("updated").textContent="Unknown",
    renderTable()
  }catch(e){
    console.error("Failed to load leaderboard:",e),
    showError("Failed to load leaderboard data. Please try again later.")
  }
}

function renderTable(){
  const e=document.getElementById("tbody");
  0===data.length?e.innerHTML='<tr><td colspan="7" class="loading">No models tested yet.</td></tr>':
  e.innerHTML=data.map((e,t)=>{
    const o=(e.percentage||e.total_score/e.max_score*100).toFixed(1),
          a=e.timestamp?new Date(e.timestamp).toLocaleDateString():"-";
    return`<tr class="rank-${t+1}"><td><strong>${e.rank||t+1}</strong></td><td>${escapeHtml(e.display_name||e.model_name)}</td><td>${e.yes_no_score}/${e.yes_no_max||25}</td><td>${e.open_ended_score}/${e.open_ended_max||300}</td><td><strong>${e.total_score}/${e.max_score||325}</strong></td><td>${o}%</td><td>${a}</td></tr>`
  }).join("")
}

function sort(e){
  const t=["rank","display_name","yes_no_score","open_ended_score","total_score","percentage","timestamp"];
  sortCol===e?sortAsc=!sortAsc:(sortCol=e,sortAsc=!1);
  const o=t[e];
  data.sort((e,t)=>{
    let a=e[o]??"",r=t[o]??"";
    "timestamp"===o&&(a=new Date(a).getTime()||0,r=new Date(r).getTime()||0),
    "percentage"===o&&!a&&e.total_score&&e.max_score&&(a=e.total_score/e.max_score*100,r=t.total_score/t.max_score*100);
    return"string"==typeof a&&"string"==typeof r?sortAsc?a.localeCompare(r,void 0,{sensitivity:"base"}):r.localeCompare(a,void 0,{sensitivity:"base"}):sortAsc?a-r:r-a
  }),
  renderTable()
}

function showError(e){
  document.getElementById("tbody").innerHTML=`<tr><td colspan="7" class="loading" style="color:#ff453a;">${escapeHtml(e)}</td></tr>`
}

function escapeHtml(e){
  if("string"!=typeof e)return e;
  const t=document.createElement("div");
  return t.textContent=e,t.innerHTML
}

function setGitHubLinks(){
  const e=window.location.hostname;
  if(!e.endsWith(".github.io"))return void(document.getElementById("github-link").style.display="none");
  const t=e.replace(".github.io",""),
        o=(window.location.pathname.match(/^\/([^\/]+)/)||[])[1]||"RP-Leaderboard",
        a=`https://github.com/${t}/${o}`;
  document.getElementById("github-link").href=a
}

document.addEventListener("DOMContentLoaded",()=>{setGitHubLinks(),loadLeaderboard()});
</script>
</body>
</html>
